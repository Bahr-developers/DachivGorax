{"ast":null,"code":"var _jsxFileName = \"/Users/macbook/Desktop/gorax/src/pages/SignIn/SignIn.jsx\",\n  _s = $RefreshSig$();\nimport \"./SignIn.css\";\nimport Eye from \"../../assets/images/eye.svg\";\nimport EyeSlash from \"../../assets/images/eyeSlash.svg\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { authUtils } from \"../../utils/auth.utils\";\nimport { useRef, useState } from \"react\";\nimport toastify from \"../../utils/toastify\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cleave from \"cleave.js/react\";\nimport { Helmet } from \"react-helmet-async\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SignIn = () => {\n  _s();\n  const smsForm = useRef(null);\n  const phoneForm = useRef(null);\n  const smsInput = useRef(null);\n  const navigate = useNavigate();\n\n  // eye btn\n  const [passwordShow, setPasswordShow] = useState(true);\n  const phone = useMutation({\n    mutationFn: authUtils.smsAuth,\n    onSuccess: data => {\n      smsInput.current.value = data.smsCode;\n      toastify.successMessage(\"Login success\");\n    },\n    onError: err => {\n      console.log(err);\n    }\n  });\n  const login = useMutation({\n    mutationFn: authUtils.loginAuth,\n    onSuccess: data => {\n      toastify.successMessage(\"Successfully logged in!\");\n      navigate(\"/home/profile/user\");\n    },\n    onError: err => {\n      console.log(err, \"login\");\n    }\n  });\n  const handleAuth = e => {\n    e.preventDefault();\n    console.log(e.target.phonenumber.value.replaceAll(\" \", \"\").slice(4));\n    phone.mutate({\n      phone: e.target.phonenumber.value.replaceAll(\" \", \"\").slice(4)\n    });\n    setTimeout(() => {\n      phoneForm.current.classList.add(\"d-none\");\n    }, 500);\n    setTimeout(() => {\n      smsForm.current.classList.remove(\"d-none\");\n    }, 500);\n  };\n  const handleLogin = e => {\n    var _phone$data;\n    e.preventDefault();\n    const code = e.target.smsCode.value;\n    const truthCode = phone === null || phone === void 0 ? void 0 : (_phone$data = phone.data) === null || _phone$data === void 0 ? void 0 : _phone$data.smsCode;\n    if (code === truthCode) {\n      var _phone$data2;\n      login.mutate({\n        smsCode: code,\n        userId: phone === null || phone === void 0 ? void 0 : (_phone$data2 = phone.data) === null || _phone$data2 === void 0 ? void 0 : _phone$data2.userId\n      });\n    } else {\n      toastify.errorMessage(\"SMS code notog`ri !!!\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Helmet, {\n      children: [/*#__PURE__*/_jsxDEV(\"title\", {\n        children: \"Sign In\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"meta\", {\n        name: \"description\",\n        content: \"Sign In page\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 77,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"link\", {\n        rel: \"canonical\",\n        href: \"/signin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"signin\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"background\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"signin-box\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"signin-header\",\n            children: \"\\u0412\\u0445\\u043E\\u0434\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleAuth,\n            ref: phoneForm,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-text\",\n              children: /*#__PURE__*/_jsxDEV(\"label\", {\n                className: \"d-flex flex-column gap-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-light label-text \",\n                  children: [\"Enter your phone:\", \" \"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 87,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Cleave, {\n                  options: {\n                    prefix: \"+998\",\n                    delimiter: \" \",\n                    blocks: [4, 2, 3, 2, 2],\n                    numericOnly: true\n                  },\n                  placeholder: \"Phone number\",\n                  className: \"signin-input-text\",\n                  name: \"phonenumber\",\n                  required: true\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 90,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 86,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"signin-submit mt-5\",\n              children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 84,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleLogin,\n            ref: smsForm,\n            className: \"d-none\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"input-password\",\n              children: [/*#__PURE__*/_jsxDEV(\"input\", {\n                className: \"signin-input-password\",\n                type: `${passwordShow ? \"password\" : \"text\"}`,\n                ref: smsInput,\n                name: \"smsCode\",\n                placeholder: \"SMS code\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 111,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: \"passwordBtn\",\n                onClick: () => setPasswordShow(prev => !prev),\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: passwordShow ? Eye : EyeSlash,\n                  alt: \"password\",\n                  className: \"passwordIcon\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 123,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 110,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"submit\",\n              className: \"signin-submit mt-5\",\n              children: \"\\u0412\\u043E\\u0439\\u0442\\u0438\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n_s(SignIn, \"woWpX2gw4J3aV9KmR4zl9FUZHkI=\", false, function () {\n  return [useNavigate, useMutation, useMutation];\n});\n_c = SignIn;\nexport default SignIn;\nvar _c;\n$RefreshReg$(_c, \"SignIn\");","map":{"version":3,"names":["Eye","EyeSlash","useMutation","authUtils","useRef","useState","toastify","useNavigate","Cleave","Helmet","SignIn","smsForm","phoneForm","smsInput","navigate","passwordShow","setPasswordShow","phone","mutationFn","smsAuth","onSuccess","data","current","value","smsCode","successMessage","onError","err","console","log","login","loginAuth","handleAuth","e","preventDefault","target","phonenumber","replaceAll","slice","mutate","setTimeout","classList","add","remove","handleLogin","code","truthCode","userId","errorMessage","prefix","delimiter","blocks","numericOnly","prev"],"sources":["/Users/macbook/Desktop/gorax/src/pages/SignIn/SignIn.jsx"],"sourcesContent":["import \"./SignIn.css\";\nimport Eye from \"../../assets/images/eye.svg\";\nimport EyeSlash from \"../../assets/images/eyeSlash.svg\";\n\nimport { useMutation } from \"@tanstack/react-query\";\nimport { authUtils } from \"../../utils/auth.utils\";\nimport { useRef, useState } from \"react\";\nimport toastify from \"../../utils/toastify\";\nimport { useNavigate } from \"react-router-dom\";\nimport Cleave from \"cleave.js/react\";\n\nimport { Helmet } from \"react-helmet-async\";\n\nconst SignIn = () => {\n  const smsForm = useRef(null);\n  const phoneForm = useRef(null);\n  const smsInput = useRef(null);\n  const navigate = useNavigate();\n\n  // eye btn\n  const [passwordShow, setPasswordShow] = useState(true);\n\n  const phone = useMutation({\n    mutationFn: authUtils.smsAuth,\n    onSuccess: (data) => {\n      smsInput.current.value = data.smsCode;\n      toastify.successMessage(\"Login success\");\n    },\n    onError: (err) => {\n      console.log(err);\n    },\n  });\n\n  const login = useMutation({\n    mutationFn: authUtils.loginAuth,\n    onSuccess: (data) => {\n      toastify.successMessage(\"Successfully logged in!\");\n      navigate(\"/home/profile/user\");\n    },\n    onError: (err) => {\n      console.log(err, \"login\");\n    },\n  });\n\n  const handleAuth = (e) => {\n    e.preventDefault();\n    console.log(e.target.phonenumber.value.replaceAll(\" \", \"\").slice(4));\n    phone.mutate({\n      phone: e.target.phonenumber.value.replaceAll(\" \", \"\").slice(4),\n    });\n    setTimeout(() => {\n      phoneForm.current.classList.add(\"d-none\");\n    }, 500);\n    setTimeout(() => {\n      smsForm.current.classList.remove(\"d-none\");\n    }, 500);\n  };\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n    const code = e.target.smsCode.value;\n    const truthCode = phone?.data?.smsCode;\n    if (code === truthCode) {\n      login.mutate({\n        smsCode: code,\n        userId: phone?.data?.userId,\n      });\n    } else {\n      toastify.errorMessage(\"SMS code notog`ri !!!\");\n    }\n  };\n\n  return (\n    <>\n      <Helmet>\n        <title>Sign In</title>\n        <meta name=\"description\" content=\"Sign In page\" />\n        <link rel=\"canonical\" href=\"/signin\" />\n      </Helmet>\n      <div className=\"signin\">\n        <div className=\"background\">\n          <div className=\"signin-box\">\n            <h2 className=\"signin-header\">Вход</h2>\n            <form onSubmit={handleAuth} ref={phoneForm}>\n              <div className=\"input-text\">\n                <label className=\"d-flex flex-column gap-3\">\n                  <span className=\"text-light label-text \">\n                    Enter your phone:{\" \"}\n                  </span>\n                  <Cleave\n                    options={{\n                      prefix: \"+998\",\n                      delimiter: \" \",\n                      blocks: [4, 2, 3, 2, 2],\n                      numericOnly: true,\n                    }}\n                    placeholder=\"Phone number\"\n                    className=\"signin-input-text\"\n                    name=\"phonenumber\"\n                    required\n                  />\n                </label>\n              </div>\n              <button type=\"submit\" className=\"signin-submit mt-5\">\n                Войти\n              </button>\n            </form>\n\n            <form onSubmit={handleLogin} ref={smsForm} className=\"d-none\">\n              <div className=\"input-password\">\n                <input\n                  className=\"signin-input-password\"\n                  type={`${passwordShow ? \"password\" : \"text\"}`}\n                  ref={smsInput}\n                  name=\"smsCode\"\n                  placeholder=\"SMS code\"\n                />\n                <button\n                  type=\"button\"\n                  className=\"passwordBtn\"\n                  onClick={() => setPasswordShow((prev) => !prev)}\n                >\n                  <img\n                    src={passwordShow ? Eye : EyeSlash}\n                    alt=\"password\"\n                    className=\"passwordIcon\"\n                  />\n                </button>\n              </div>\n              <button type=\"submit\" className=\"signin-submit mt-5\">\n                Войти\n              </button>\n            </form>\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default SignIn;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}